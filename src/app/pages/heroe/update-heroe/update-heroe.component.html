<main class="container mx-auto p-4">
	<div class="relative flex flex-col gap-4">
		<form [formGroup]="heroeForm" class="my-12 text-gray-900 dark:text-gray-100">
			@if(heroe){
				<h2 class="text-center text-2xl mb-4">Modification de {{ heroe?.name }}</h2>
			} @else {
				<h2 class="text-center text-2xl mb-4">Ajout d'un héro</h2>
			}

			<div class="flex flex-col gap-4">

				<div class="flex flex-col md:flex-row gap-4">
					<div class="flex flex-col flex-1">
						<label for="name">Nom</label>
						<input type="text" id="name" formControlName="name" class="p-2 border border-gray-300 rounded-lg" />
					</div>
					<div class="flex flex-col flex-1">
						<label for="game">Jeu</label>
						<select class="p-2.5 border rounded-lg border-gray-300" id="game" formControlName="game">
							@for (game of enumKeysObject(Game); track game){
								<option class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white" [value]="game">{{ game }}</option>
							}
						</select>
					</div>

					<div class="flex flex-col flex-1">
						<label for="role">Role</label>
						<select class="p-2.5 border rounded-lg border-gray-300" id="role" formControlName="role">
							@if(heroeForm.get('game')?.value === 'OVERWATCH') {
								@for (role of enumKeysObject(OverwatchHeroRole); track role){
									<option class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white" [value]="role">{{ role }}</option>
								}
							} @else if (heroeForm.get('game')?.value === 'MARVEL_RIVALS') {
								@for (role of enumKeysObject(MarvelRivalsHeroRole); track role){
									<option class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white" [value]="role">{{ role }}</option>
								}
							}
						</select>
					</div>
				</div>

				<button class="flex-1 p-2 border border-blue-500 w-full md:w-fit rounded-lg cursor-pointer h-fit hover:border-blue-600 text-white" (click)="handleUploadFile()">Ajouter une image</button>

				<input type="file" id="fileInput" formControlName="image" (change)="onFileSelected($event)" accept="image/webp" hidden/>
				<span class="text-xs">L'image doit être au format webp ne pas faire plus de 5Mo</span>
				@if (imagePreview) {
					<img [src]="imagePreview" class="w-24" alt="Aperçu">
				}

				<div class="flex flex-row justify-center">
					<button class="p-2 bg-green-700 w-full md:w-fit rounded-lg cursor-pointer hover:bg-green-600 text-white" (click)="saveOrUpdateHeroe()">Sauvegarder</button>
				</div>

			</div>

		</form>
	</div>
</main>
