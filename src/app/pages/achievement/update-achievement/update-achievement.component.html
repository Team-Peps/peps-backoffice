<main class="container mx-auto p-4">
	<div class="relative flex flex-col gap-4">
		<form [formGroup]="achievementForm" class="my-12 text-gray-900 dark:text-gray-100">
			@if(achievement) {
				<h2 class="text-center text-2xl mb-4">Modification du résultat</h2>
			} @else {
				<h2 class="text-center text-2xl mb-4">Ajout d'un résultat</h2>
			}

			<div class="flex flex-col gap-4">

				<div class="flex flex-col md:flex-row gap-4">
					<div class="flex flex-col flex-1">
						<label for="competitionName">Compétition</label>
						<input type="text" id="competitionName" formControlName="competitionName" class="p-2 border border-gray-300 rounded-lg" placeholder="OWCS 2025 Stage 2"/>
					</div>
					<div class="flex flex-col flex-1">
						<label for="ranking">Rang</label>
						<input type="number" id="ranking" formControlName="ranking" class="p-2 border border-gray-300 rounded-lg" min="1" max="10" placeholder="1"/>
					</div>
				</div>

				<div class="flex flex-col md:flex-row gap-4">

					<div class="flex flex-col flex-1">
						<label for="year">Année</label>
						<input type="number" id="year" formControlName="year" class="p-2 border border-gray-300 rounded-lg" min="2000" placeholder="2025"/>
					</div>

					<div class="flex flex-col flex-1">
						<label for="game">Roster</label>
						<select class="p-2.5 border rounded-lg border-gray-300" id="game" formControlName="game" (change)="changeRoster($event)">
							@for (game of enumKeysObject(Game); track game){
								<option class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white" [value]="game">{{ game }}</option>
							}
						</select>
					</div>

				</div>

				<div class="flex flex-row justify-center">
					<button
						[ngClass]="{'bg-green-700 hover:bg-green-600 cursor-pointer': isRosterValid, 'bg-gray-500 cursor-not-allowed': !isRosterValid}"
						class="p-2 w-full md:w-fit rounded-lg text-white"
						(click)="saveOrUpdateAchievement()"
						[disabled]="!isRosterValid"
					>Sauvegarder</button>
				</div>

			</div>

		</form>
	</div>
</main>
